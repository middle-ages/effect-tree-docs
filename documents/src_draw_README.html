<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>src/draw/README | effect-tree - v1.0.21</title><meta name="description" content="Documentation for effect-tree"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">effect-tree - v1.0.21</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">src/draw/README</a></li></ul></div><div class="tsd-panel tsd-typography"><h1 id="draw-module" class="tsd-anchor-link">Draw Module<a href="#draw-module" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A simple compositional terminal drawing library that is just good enough to show some recursive structures in diagrams. You use it to build parts, combine them in various ways to build bigger parts, then render them to the terminal.</p>
<ol>
<li><a href="#overview">Overview</a></li>
<li><a href="#parts">Parts</a>
<ol>
<li><a href="#creating">Creating</a></li>
<li><a href="#sizing-parts">Sizing Parts</a></li>
</ol>
</li>
<li><a href="#struts">Struts</a>
<ol>
<li><a href="#drawing-struts">Drawing Struts</a></li>
<li><a href="#overflow">Overflow</a></li>
</ol>
</li>
<li><a href="#trees">Trees</a></li>
<li><a href="#modules">Modules</a></li>
</ol>
<h2 id="overview" class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Parts can be placed next to each other with a direction and an alignment so that the smaller parts will be stretched and the resulting part will always remain a rectangular area. The library is used for drawing trees here because this placement of parts next to each other can be done with no measuring or computing of sizes.</p>
<p>This is also the main limitation of the library- there is no way to measure part sizes until they are rendered. You cannot render parts while you are computing their content so we use block alignment and the <em>struts</em> feature described below to get around this limitation.</p>
<h2 id="parts" class="tsd-anchor-link">Parts<a href="#parts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You will find here functions to build <em>parts</em>, which are rectangular blocks of glyphs. They are rectangular because they will render to a rectangle of text on a terminal. A part never has any holes or jagged edges: every area of the rectangle is filled.</p>
<p>There are four types of the parts, two are atomic and two composite. All other parts are composed from these four:</p>
<ol>
<li>Atomic
<ol>
<li><a href="https://middle-ages.github.io/effect-tree-docs/types/effect-tree.Draw.Empty.html">Empty</a>. The empty type.</li>
<li><a href="https://middle-ages.github.io/effect-tree-docs/types/effect-tree.Draw.Text.html">Text</a>. A part that shows some text.</li>
</ol>
</li>
<li>Composite
<ol>
<li><a href="https://middle-ages.github.io/effect-tree-docs/types/effect-tree.Draw.Row.html">Row</a>. Children are distributed horizontally according to alignment.</li>
<li><a href="https://middle-ages.github.io/effect-tree-docs/types/effect-tree.Draw.Column.html">Column</a>. Children are distributed vertically according to alignment.</li>
</ol>
</li>
</ol>
<h3 id="creating" class="tsd-anchor-link">Creating<a href="#creating" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The functions <a href="https://middle-ages.github.io/effect-tree-docs/functions/effect-tree.Draw.text.html">text</a>, <a href="https://middle-ages.github.io/effect-tree-docs/functions/effect-tree.Draw.row.html">row</a>, and <a href="https://middle-ages.github.io/effect-tree-docs/functions/effect-tree.Draw.column.html">column</a> are the basic ways to create the four part types, with the empty part exported as the constant <a href="https://middle-ages.github.io/effect-tree-docs/variables/effect-tree.Draw.empty.html">empty</a>.</p>
<pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">Draw</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;effect-tree&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> {</span><span class="hl-6">box</span><span class="hl-1">, </span><span class="hl-6">column</span><span class="hl-1">, </span><span class="hl-6">drawPart</span><span class="hl-1">, </span><span class="hl-6">empty</span><span class="hl-1">, </span><span class="hl-6">row</span><span class="hl-1">, </span><span class="hl-6">text</span><span class="hl-1">} = </span><span class="hl-2">Draw</span><br/><br/><span class="hl-7">// Two lists of text.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">leftCells</span><span class="hl-1"> = [</span><span class="hl-4">text</span><span class="hl-1">(</span><span class="hl-3">&#39;↑&#39;</span><span class="hl-1">), </span><span class="hl-4">text</span><span class="hl-1">(</span><span class="hl-3">&#39;left|&#39;</span><span class="hl-1">), </span><span class="hl-4">text</span><span class="hl-1">(</span><span class="hl-3">&#39;↓&#39;</span><span class="hl-1">)]</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">rightCells</span><span class="hl-1"> = [</span><span class="hl-4">text</span><span class="hl-1">(</span><span class="hl-3">&#39;↑&#39;</span><span class="hl-1">), </span><span class="hl-4">text</span><span class="hl-1">(</span><span class="hl-3">&#39;|right&#39;</span><span class="hl-1">), </span><span class="hl-4">text</span><span class="hl-1">(</span><span class="hl-3">&#39;↓&#39;</span><span class="hl-1">)]</span><br/><br/><span class="hl-7">// A pair of columns.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">leftColumn</span><span class="hl-1"> = </span><span class="hl-2">column</span><span class="hl-1">.</span><span class="hl-4">left</span><span class="hl-1">(</span><span class="hl-2">leftCells</span><span class="hl-1">)</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">rightColumn</span><span class="hl-1"> = </span><span class="hl-2">column</span><span class="hl-1">.</span><span class="hl-4">right</span><span class="hl-1">(</span><span class="hl-2">rightCells</span><span class="hl-1">)</span><br/><br/><span class="hl-7">// A row with the column pair and the empty part.</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">bottomRow</span><span class="hl-1"> = </span><span class="hl-4">row</span><span class="hl-1">(</span><span class="hl-3">&#39;middle&#39;</span><span class="hl-1">)(</span><span class="hl-3">&#39;center&#39;</span><span class="hl-1">)([</span><span class="hl-2">leftColumn</span><span class="hl-1">, </span><span class="hl-2">empty</span><span class="hl-1">, </span><span class="hl-2">rightColumn</span><span class="hl-1">])</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">drawPart</span><span class="hl-1">.</span><span class="hl-4">unlines</span><span class="hl-1">(</span><span class="hl-4">box</span><span class="hl-1">(</span><span class="hl-2">bottomRow</span><span class="hl-1">)))</span><br/><span class="hl-7">// ┌───────────┐</span><br/><span class="hl-7">// │↑         ↑│</span><br/><span class="hl-7">// │left||right│</span><br/><span class="hl-7">// │↓         ↓│</span><br/><span class="hl-7">// └───────────┘</span>
</code><button type="button">Copy</button></pre>

<h3 id="sizing-parts" class="tsd-anchor-link">Sizing Parts<a href="#sizing-parts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Part sizes are defined entirely by their content and padding. When they are aligned, they grow to match the widest or tallest in their row or column, depending on the axis.</p>
<p>The area created when aligning is, together with any explicit padding, the available space that is left for filling with non-content. You can set how this empty area created by the alignment is rendered by setting <em>struts</em> on each of the four directions. Struts have a fixed prefix and suffix but their bodies stretch out to fill available space.</p>
<p>The struts are set by default to empty space, as that is what you usually expect as padding, however we set specific glyphs to draw borders, separators, connectors and other elements where size depends on content.</p>
<p>When your parts are ready, the <code>drawPart</code> function will recursively fold the part into a list of string rows for display.</p>
<h2 id="struts" class="tsd-anchor-link">Struts<a href="#struts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The glyphs used to fill available space between and around shapes are determined by the <code>Strut</code>.</p>
<p>By default it is set to the space character, which is usually what you want surrounding your text when it is being aligned.</p>
<p>The strut can be a character, like the space configured by default, and it will be repeated to fill available space.</p>
<p>However the type for <code>Strut</code> also has a <em>prefix</em> and a <em>suffix</em>, and its body can be any length, which simplifies some types of drawings described below. For example a horizontal strut is defined as a triplet of:</p>
<ol>
<li>A prefix string.</li>
<li>A body string.</li>
<li>A suffix string.</li>
</ol>
<p>the prefix and suffix are optional, and by default they are set to the empty string so that available space fills uniformly with spaces.</p>
<h3 id="drawing-struts" class="tsd-anchor-link">Drawing Struts<a href="#drawing-struts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A strut is drawn by shapes to fill some available space when aligning and padding. A horizontal strut is N glyphs <em>wide</em> and one glyph <em>high</em>. A vertical strut is N glyphs <em>high</em> and zero glyphs <em>wide</em>.</p>
<p>A horizontal strut, for example, is drawn so:</p>
<ol>
<li>First we draw the prefix.</li>
<li>Next we repeat the body to fill available space leaving space for the
prefix and suffix.</li>
<li>Finally we draw the suffix.</li>
</ol>
<p>This makes it easy to build parts that stretch to adapt to neighboring parts <em>without</em> measuring or doing any math. For example, leaving a top row of your shape empty, will fill it with a single character of the vertical struct.  This will not take any space, so a horizontal strut will be used to fill the top line. If it is created so:</p>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">topHorizontalLineStrut</span><span class="hl-1"> = </span><span class="hl-2">strut</span><span class="hl-1">.</span><span class="hl-4">horizontal</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;├╴╼┅┉┄┈ &#39;</span><span class="hl-1">,                 </span><span class="hl-7">// prefix 9 glyphs wide</span><br/><span class="hl-1">  [</span><span class="hl-3">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;2&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;3&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;4&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;5&#39;</span><span class="hl-1">],  </span><span class="hl-7">// body   5 glyphs wide</span><br/><span class="hl-1">  </span><span class="hl-3">&#39; ┈┄┉┅╾╌╶┤&#39;</span><span class="hl-1">,                </span><span class="hl-7">// suffix 9 glyphs wide</span><br/><span class="hl-1">)</span><br/><span class="hl-1">  ↑    ↑    ↑    ↑</span><br/><span class="hl-1">  ┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈</span><span class="hl-2">ruler</span><br/><span class="hl-1">  </span><span class="hl-10">0123456789012345</span>
</code><button type="button">Copy</button></pre>

<p>Note the <code>body</code> (the second argument) must be given as a non-empty string array to ensure we always have at least a single glyph with which to fill available space.</p>
<p>Then a line 30 glyphs wide part configured with the <code>topHorizontalLineStrut</code> above will be filled so:</p>
<pre><code class="txt"> ├╴╼┅┉┄┈ 1234512345123 ┈┄┉┅╾╌╶┤

↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑
0    5   10   15   20   25   30   35
┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈ruler
012345678901234567890123456789012345
</code><button type="button">Copy</button></pre>

<p>A 20 glyphs wide part will be draw so:</p>
<pre><code class="txt"> ├╴╼┅┉┄┈ 123 ┈┄┉┅╾╌╶┤

↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑
0    5   10   15   20   25   30   35
┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈ruler
012345678901234567890123456789012345
</code><button type="button">Copy</button></pre>

<p>This is useful, for example when drawing responsive borders, separators, and connectors.</p>
<h3 id="overflow" class="tsd-anchor-link">Overflow<a href="#overflow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When available space is less than prefix width + a single body width + suffix width, the strut <em>overflows</em>. Overflow is cropped by priority.</p>
<p>First we try to remove from the right edge of the <em>body</em> of the strut.</p>
<p>If the entire body was removed but we still overflow, remove in equal measure from the prefix and the suffix, removing from the tail of the prefix and the head of the suffix, so that the last two glyphs remaining are the head glyph of the prefix and the last glyph of the suffix.</p>
<p>If there is only a single space left, the final character of the suffix is clipped so that only the 1st character of the prefix is left.</p>
<p>A 5 glyph wide part will be draw so:</p>
<pre><code class="txt"> ├╴╼┅ ┅╾╌╶┤

↑    ↑    ↑
0    5   10
┈┈┈┈┈┈┈┈┈┈┈ruler
01234567890
</code><button type="button">Copy</button></pre>

<p>At a width of 2 glyphs:</p>
<pre><code class="txt"> ├┤

↑    ↑    ↑
0    5   10
┈┈┈┈┈┈┈┈┈┈┈ruler
01234567890
</code><button type="button">Copy</button></pre>

<p>And when there is only a single space to fill:</p>
<pre><code class="txt"> ├

↑    ↑    ↑
0    5   10
┈┈┈┈┈┈┈┈┈┈┈ruler
01234567890
</code><button type="button">Copy</button></pre>

<h2 id="trees" class="tsd-anchor-link">Trees<a href="#trees" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Trees can be <em>themed</em>, which just means that they get a theme as an argument and they can use it to theme how they draw. For example a part could depend not on individual <em>glyphs</em>, E.g.: <code>┌</code> but instead on glyph <em>roles</em>, for example the role <code>elbow</code>, and then a theme could set the glyph for the role to <code>╭</code> to get rounded corners.</p>
<h2 id="modules" class="tsd-anchor-link">Modules<a href="#modules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Useful functions are mostly found in the packages
<a alt="part" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/part">part</a> and above. These are all the internal modules of <code>Draw</code>:</p>
<table>
<tr>
<td style="border-width: 0 !important">
<ol>
<li><a alt="tree" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/tree">tree</a>: Parts for drawing trees and the <a alt="drawKey" href="https://middle-ages.github.io/effect-tree-docs/functions/effect-tree.Draw.drawTree.html">drawTree function</a>.  
<li><a alt="parts" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/parts">parts</a>: Various useful parts, for example the <a alt="box" href="https://middle-ages.github.io/effect-tree-docs/functions/effect-tree.Draw.box.html">box</a> part.
<li><a alt="glyph" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/glyph">glyph</a>: Sugar for accessing glyphs that are helpful when line drawing on the terminal.
<li><a alt="part" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/part">part</a>: A basic abstraction for working with rectangular blocks of text.
<li><a alt="partF" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/partF">partF</a>: The non-recursive version of <code>Part</code>.
<li><a alt="align" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/align">align</a>: Aligning text and filling available space created with struts.
<li><a alt="struts" href="https://github.com/middle-ages/effect-tree/tree/main/src/draw/struts">struts</a>: Functions to fill empty parts of rectangular blocks of text.
</ol>
</td>
<td style="border-width: 0 !important">
<img alt="Draw modules and their interdependencies" src="../media/draw-modules.png" width=400>
</td>
</td>
</table></div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-internal" name="internal"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Internal</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#draw-module"><span>Draw <wbr/>Module</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#parts"><span>Parts</span></a></li><li><ul><li><a href="#creating"><span>Creating</span></a></li><li><a href="#sizing-parts"><span>Sizing <wbr/>Parts</span></a></li></ul></li><li><a href="#struts"><span>Struts</span></a></li><li><ul><li><a href="#drawing-struts"><span>Drawing <wbr/>Struts</span></a></li><li><a href="#overflow"><span>Overflow</span></a></li></ul></li><li><a href="#trees"><span>Trees</span></a></li><li><a href="#modules"><span>Modules</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">effect-tree - v1.0.21</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
